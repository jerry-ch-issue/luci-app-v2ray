config v2ray 'main'
	option enabled '0'
	option v2ray_file '/usr/bin/v2ray'
	option mem_percentage '0'
	option loglevel 'warning'
	option access_log '/dev/null'
	option error_log '/var/log/v2ray-error.log'
	list inbounds 'socks_proxy'
	list inbounds 'dokodemo_door'
	list outbounds 'vmess'
	list outbounds 'direct'
	list outbounds 'block'
	list outbounds 'dns_out'

config dns 'main_dns'
	option enabled '0'
	list hosts 'example.com|127.0.0.1'
	list servers 'cloudflare_dns_1'
	list servers 'google_dns_1'
	list servers '114_dns_1'
	list servers 'ali_dns_1'
	option tag 'dns_in'
	option query_strategy 'UseIPv4'

config dns_server 'cloudflare_dns_1'
	option alias 'cloudflare_dns_1'
	option dns_server_type 'DoH'
	option doh_provider '1.1.1.1'

config dns_server 'google_dns_1'
	option alias 'google_dns_1'
	option address '8.8.8.8'
	option dns_server_type 'UDP'

config dns_server 'op_dns_1'
	option alias 'op_dns_1'
	option address '208.67.222.222'
	option port '5353'
	option dns_server_type 'UDP'

config dns_server '114_dns_1'
	option alias '114_dns_1'
	option address '114.114.114.114'
	option port '53'
	list domains 'geosite:cn'
	list expect_ips 'geoip:cn'
	option dns_server_type 'UDP'
	option skip_fallback '1'

config dns_server 'ali_dns_1'
	option alias 'ali_dns_1'
	option address '223.5.5.5'
	list domains 'geosite:cn'
	option dns_server_type 'UDP'
	option skip_fallback '1'

config routing 'main_routing'
	option enabled '0'
	option domain_strategy 'IPIfNonMatch'
	option main_domain_matcher 'linear'
	list rules 'direct_cn_ip'
	list rules 'direct_cn_domain'
	list rules 'direct_speedtest'
	list rules 'block_ad'
	list rules 'route_dns'
	list rules 'direct_dns'
	list rules 'direct_bt'
	list rules 'proxy_dns'
	list rules 'direct_ntp'
	option tag 'routing'

config routing_rule 'direct_cn_ip'
	option alias 'direct_cn_ip'
	option type 'field'
	list ip 'geoip:private'
	list ip 'geoip:cn'
	option outbound_tag 'direct'
	option domain_matcher 'linear'

config routing_rule 'direct_cn_domain'
	option alias 'direct_cn_domain'
	option type 'field'
	list domain 'geosite:cn'
	option outbound_tag 'direct'
	option domain_matcher 'linear'

config routing_rule 'direct_speedtest'
	option alias 'direct_speedtest'
	option type 'field'
	list domain 'geosite:speedtest'
	option outbound_tag 'direct'
	option domain_matcher 'linear'

config routing_rule 'direct_bt'
	option alias 'direct_bt'
	option type 'field'
	option protocol 'bittorrent'
	option outbound_tag 'direct'
	option domain_matcher 'linear'

config routing_rule 'block_ad'
	option alias 'block_ad'
	option type 'field'
	list domain 'geosite:category-ads-all'
	option outbound_tag 'block'
	option domain_matcher 'linear'

config routing_rule 'route_dns'
	option alias 'route_dns'
	option type 'field'
	list network 'udp'
	list port '53'
	list inbound_tag 'transparent'
	option outbound_tag 'dns_out'
	option domain_matcher 'linear'

config routing_rule 'direct_dns'
	option alias 'direct_dns'
	option type 'field'
	list ip '114.114.114.114'
	list ip '223.5.5.5'
	option outbound_tag 'direct'
	option domain_matcher 'linear'

config routing_rule 'proxy_dns'
	option alias 'proxy_dns'
	option type 'field'
	list ip '1.1.1.1'
	list ip '8.8.8.8'
	list ip '208.67.222.222'
	option outbound_tag 'vmess'
	option domain_matcher 'linear'

config routing_rule 'direct_ntp'
	option alias 'direct_ntp'
	option type 'field'
	list network 'udp'
	list port '123'
	option outbound_tag 'direct'
	option domain_matcher 'linear'

config routing_balancer 'routing_balancer_1'
	option tag 'balancer'
	list selector 'a'
	list selector 'ab'

config policy 'main_policy'
	option enabled '0'

config policy_level 'policy_level_0'
	option level '0'
	option handshake '4'
	option conn_idle '300'
	option uplink_only '2'
	option downlink_only '5'
	option buffer_size '0'

config reverse 'main_reverse'
	option enabled '0'
	list bridges 'bridge|test.v2ray.com'
	list portals 'portal|test.v2ray.com'

config inbound 'socks_proxy'
	option alias 'socks_proxy'
	option listen '0.0.0.0'
	option port '1080'
	option protocol 'socks'
	option s_socks_auth 'noauth'
	option s_socks_udp '1'
	option s_socks_ip '127.0.0.1'
	option sniffing_enabled '1'
	list sniffing_dest_override 'http'
	list sniffing_dest_override 'tls'
	option tag 'socks_proxy'

config inbound 'dokodemo_door'
	option alias 'dokodemo_door'
	option port '1081'
	option protocol 'dokodemo-door'
	option tag 'transparent'
	option sniffing_enabled '1'
	list s_dokodemo_door_network 'tcp'
	list s_dokodemo_door_network 'udp'
	list sniffing_dest_override 'http'
	list sniffing_dest_override 'tls'

config outbound 'vmess'
	option alias 'vmess'
	option protocol 'vmess'
	option s_vmess_address '0.0.0.0'
	option s_vmess_port '10086'
	option s_vmess_user_id 'b831381d-6324-4d53-ad4f-8cda48b30811'
	option tag 'vmess'

config outbound 'direct'
	option alias 'direct'
	option protocol 'freedom'
	option tag 'direct'

config outbound 'block'
	option alias 'block'
	option protocol 'blackhole'
	option tag 'block'

config outbound 'dns_out'
	option alias 'dns_out'
	option protocol 'dns'
	option tag 'dns_out'

config transparent_proxy 'main_transparent_proxy'
	option apnic_delegated_mirror 'apnic'
	option gfwlist_mirror 'github'
	option redirect_port '1081'
	option proxy_mode 'gfwlist_proxy'
	option direct_list_dns '223.5.5.5#53'
	list lan_ifaces 'lan'
	option proxy_list_dns '1.1.1.1#53'
	option use_tproxy '1'
